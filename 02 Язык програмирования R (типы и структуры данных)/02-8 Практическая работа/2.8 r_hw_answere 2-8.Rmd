---
title: "Домашнее задание"
output:
  pdf_document: default
  word_document: default
  html_document:
    df_print: paged
header-includes:
- \usepackage[russian]{babel}
- \usepackage{hyperref}
- \usepackage{amsmath}
- \hypersetup{colorlinks=true,urlcolor=blue}
---

## Задача 1

Ниже приведено описание показателей, взятых из документации к результатам опроса:

* `ID`: id респондента, целочисленный тип;
* `GENDER`: пол, факторный тип (значения: 1 — женский, 2 — мужской);
* `YEAR`: год рождения, целочисленный тип.

Даны векторы, в которых сохранены несколько случайно выбранных значений из показателей, описанных выше:

```{r}
ID <- 100:108
GENDER <- c(1, 2, 2, 1, 2, 1, 1, 1)
YEAR <- c("1983", " 1988", "1975 ", "1980", "1977  ", "1992", "1994", "1983 ")
```

**1.1.** Проверьте, к какому типу относятся векторы (числовой, целочисленный, логический, строковый, факторный). 

*Ответ:*

```{r}
class(ID)
class(GENDER)
class(YEAR)
```
Векторы ID, GENDER и YEAR относятся к целочисленному, числовому и строковому типам данных соответственно

**1.2.** Если тип какого-то вектора не соответствует заявленному в описании выше, исправьте это, сохранив изменения в самом векторе. Среди приведённых выше векторов «неправильных» может быть несколько.

*Ответ:*

```{r}
GENDER <- as.factor(GENDER)
YEAR <- as.integer(YEAR)
class(ID)
class(GENDER)
class(YEAR)
```

\newpage
## Задача 2

В таблицах ниже приведены данные по объёму экспорта и импорта товаров в долларах США за 2019 год для трёх стран (данные проекта [COMTRADE](https://comtrade.un.org/)).

\begin{table}[ht!]
\centering
\caption{экспорт}
\begin{tabular}{|c|c|c|}
\hline
\textbf{Партнёр 1} & \textbf{Партнёр 2} & \textbf{Экспорт (доллары США)} \\
\hline
Канада & Нидерланды & 3 905 228 446\\
\hline
Канада & США & 336 531 873 909 \\
\hline
Нидерланды & Канада & 4 862 948 109 \\
\hline
Нидерланды & США & 29 807 484 356 \\
\hline
США & Канада & 292 338 433 401 \\
\hline
США & Нидерланды & 51 225 636 600\\
\hline
\end{tabular}
\end{table}

\begin{table}[ht!]
\centering
\caption{импорт}
\begin{tabular}{|c|c|c|}
\hline
\textbf{Партнёр 1} & \textbf{Партнёр 2} & \textbf{Импорт (доллары США)} \\
\hline
Канада & Нидерланды & 3 515 239 399\\
\hline
Канада & США & 229 687 088 046 \\
\hline
Нидерланды & Канада & 2 249 551 077 \\
\hline
Нидерланды & США & 42 262 861 193 \\
\hline
США & Канада & 326 628 559 104 \\
\hline
США & Нидерланды & 30 883 263 358\\
\hline
\end{tabular}
\end{table}

**2.1.** Создайте датафреймы `goods_export` и `goods_import`, которые выглядят так, как таблицы с данными выше. 

**Подсказка:** названия столбцов датафрейма добавляются с помощью той же функции, что и у матриц.


*Ответ:*

Датафрейм goods_export

```{r, echo=FALSE}
goods_export <- cbind.data.frame(
  rep(c('Канада', 'Нидерланды', 'США'), each=2),
  c('Нидерланды', rep(c('США', 'Канада'), 2), 'Нидерланды'),
  c(3905228446, 336531873909, 4862948109, 29807484356, 292338433401, 51225636600)
)
colnames(goods_export) <- c('Парнер 1', 'Парнер 2', 'Экспорт (доллары США)')
goods_export
```

Датафрейм goods_import

```{r, echo=FALSE}
goods_import <- cbind.data.frame(
  rep(c('Канада', 'Нидерланды', 'США'), each=2),
  c('Нидерланды', rep(c('США', 'Канада'), 2), 'Нидерланды'),
  c(3515239399, 229687088046, 2249551077, 42262861193, 326628559104, 30883263358)
)
colnames(goods_import) <- c('Парнер 1', 'Парнер 2', 'Импорт (доллары США)')
goods_import
```


**2.2.** На основе данных из таблиц 1 и 2 создайте матрицы `export_mat` и `import_mat`, которые будут в более компактном виде хранить информацию об экспорте и импорте. Это должны быть квадратные матрицы (число строк равно числу столбцов), по строкам и столбцам должны идти названия стран: Канада, Нидерланды, США.

**Пример.** Известно, что страна A экспортирует в страну B товара на 20 000 долларов, а B экспортирует в А товара на 40 000 долларов. При этом мы считаем, что сама страна в себя ничего не экспортирует. Создадим матрицу для описания экспорта двух стран A и B:

\begin{table}[ht!]
\centering
\begin{tabular}{cc}
\textbf{A} & \textbf{B} \\
0 & 20000 \\
40000 & 0 \\
\end{tabular}
\end{table}

*Ответ:*

Матрица export_mat

```{r, echo=FALSE}
export_mat <- rbind(c(0, 3905228446,336531873909),
                    c(4862948109, 0, 29807484356),
                    c(292338433401, 51225636600, 0))
colnames(export_mat) <- c('Канада', 'Нидерланды', 'США')
export_mat
```

Матрица import_mat

```{r, echo=FALSE}
import_mat <- rbind(c(0, 3515239399, 229687088046),
                    c(2249551077, 0, 42262861193),
                    c(326628559104, 30883263358, 0))
colnames(import_mat) <- c('Канада', 'Нидерланды', 'США')
import_mat
```

**2.3.** Используя матрицы из пункта 2.2, создайте матрицу `diff_mat`, которая содержит разницу между экспортом и импортом стран.

*Ответ:*

```{r, echo=FALSE}
diff_mat <- export_mat - import_mat
diff_mat
```

**2.4.** Используя матрицы из пункта 2.2, создайте матрицы с логарифмированными (десятичный логарифм) значениями экспорта и импорта. Назовите матрицы по своему усмотрению.

*Ответ:*

Матрица export_log

```{r, echo=FALSE}
export_log <- log10(export_mat)
colnames(export_log) <- c('Канада', 'Нидерланды', 'США')
export_log
```
Матрица import_log

```{r, echo=FALSE}
import_log <- log10(import_mat)
colnames(import_log) <- c('Канада', 'Нидерланды', 'США')
import_log
```

**2.5.** Создайте список `L_data`, который содержит следующие элементы:

* элемент `source` со значением "COMTRADE, https://comtrade.un.org/";
* элемент `year` со значением "2019";
* элемент `countries` — вектор с названиями стран (как в матрицах);
* элемент `export` — датафрейм `goods_export`;
* элемент `import` — датафрейм `goods_import`;
* элемент `export_mat` — матрица `export_mat`;
* элемент `import_mat` — матрица `export_mat`.

*Ответ:*

```{r, echo=FALSE}
L_data <- list(
  source = "COMTRADE, https://comtrade.un.org/",
  year = 2019,
  countries = c("Канада", "Нидерланды", "США"),
  export = goods_export,
  import = goods_import,
  export_mat = export_mat,
  import_mat = import_mat
)
L_data
```

**2.6.** Используя созданный список `L_data` и обращаясь только к индексам элементов, выведите на экран:

* третью страну в векторе `countries`;
* объём экспорта из Нидерландов в Канаду из матрицы `export_mat`;
* объём импорта из США в Канаду из матрицы `import_mat`.

*Ответ:*

Третья страна в векторе countries

```{r, echo=FALSE}
L_data$countries[3]
```
Объём экспорта из Нидерландов в Канаду из матрицы export_mat

```{r, echo=FALSE}
L_data$export_mat[2,1]
```

Объём импорта из США в Канаду из матрицы import_mat

```{r, echo=FALSE}
L_data$import_mat[3,1]
```

**2.7.** Добавьте в конец списка `L_data` элемент без названия, который содержит строку с сегодняшней датой в произвольном формате.

*Ответ:*

```{r, echo=FALSE}
L_data[[8]] <- date()
L_data
```
