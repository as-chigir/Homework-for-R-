---
title: "Домашнее задание"
output:
  word_document: default
  html_document: default
---

# Задачи

## Задача 1

Загрузите данные из файла `travel-times.csv` и сохраните их в датафрейм `travel`.

*Ответ:*

```{r}
setwd("C:/Users/alexandra_c/Desktop/Уроки R/Практические задания/08 Работа с пропущенными значениями в R/08-7 Практическая работа")
travel <- read.csv("travel-times.csv")
```

\newpage

## Задача 2

Удалите из датафрейма `travel` столбец `Comments`.

*Ответ:*

```{r}
library(tidyverse)
travel <- travel %>% select(-Comments)
```

\newpage

## Задача 3

Замените в датафрейме `travel` все значения `""` и `"-"` на `NA`.

**Подсказка.** Пример кода для замены значения 99 на `NA`:

```
dat[dat == 99] <- NA
```

*Ответ:*

```{r}
travel[travel == '' | travel == '-' | travel == 'NA'] <- NA
```

\newpage

## Задача 4

Посчитайте количество ячеек с пропущенными значениями в датафрейме `travel`. Посчитайте количество строк, содержащих пропущенные значения, в датафрейме `travel`. Сравните результаты. Можно ли считать, что каждая строка содержит ровно одно пропущенное значение? Приведите ответ на вопрос в файле с домашним заданием.

*Ответ:*

```{r}
sum(is.na(travel)) # кол-во ячеек с пропущ.значениями
sum(!complete.cases(travel)) # кол-во строк с пропущ.значениями
rowSums(is.na(travel[!complete.cases(travel),])) # Да, одна срока содержит ровно одно пропущ.значение
```

\newpage

## Задача 5

Используя библиотеку `VIM`, постройте две визуализации для выявления закономерностей в пропущенных значениях. Проинтерпретируйте полученные результаты: определите, в каких столбцах встречаются пропущенные значения, поясните, наблюдаются ли какие-то закономерности в пропущенных значениях. Предложите возможные причины появления пропусков в данных. Приведите ответы на вопросы в файле с домашним заданием.

*Ответ:*

```{r}
library(VIM)

aggr(travel)
matrixplot(travel)

a <- colSums(is.na(travel[!complete.cases(travel),]))
a[a == max(a)]
# пропущен.значения находятся только в столбце FluelEconomy
# честно сказать не наблюдаю какой-либо закономерности, кроме того что этих данных не хватает в период поездок в 2012 году.
# Возможно в этот период времени перестали вести учет топлива
```

\newpage

## Задача 6

Вычислите среднее и медианное значение по столбцам, в которых встречаются пропущенные значения. Если среднее значение сильно отличается от медианного, заполните пропуски медианным значением по столбцу, если нет — средним значением по столбцу.

*Ответ:*

```{r}
str(travel)
# Не удалось найти среднее значение и медиану, потому что тип данных в столбце FuelEconomy был строковый.
# Необходимо изменить тип данных на числовой с плавающей точкой
travel$FuelEconomy <- as.numeric(travel$FuelEconomy)
# теперь найдем среднее значение и медиану
mean(travel$FuelEconomy, na.rm = TRUE)
median(travel$FuelEconomy, na.rm = TRUE)
# Значения не сильно отличаются, тогда мы можем заполнить пропуски средним значением
travel <- travel %>%mutate(FuelEconomy = ifelse(is.na(FuelEconomy),
                                                mean(FuelEconomy, na.rm = TRUE),
                                                FuelEconomy))
```

\newpage


## Задача 7

Загрузите данные из файла `melb_data.csv` и сохраните их в датафрейм `melb`.

*Ответ:*

```{r}
melb <- read.csv("melb_data.csv")
```

\newpage

## Задача 8

Используя библиотеку `VIM`, постройте две визуализации для выявления закономерностей в пропущенных значениях. Проинтерпретируйте полученные результаты: определите, в каких столбцах встречаются пропущенные значения, поясните, наблюдаются ли какие-то закономерности в пропущенных значениях. Предложите возможные причины появления пропусков в данных. Приведите ответы на вопросы в файле с домашним заданием.


*Ответ:*

```{r}
aggr(melb)
matrixplot(melb)


# пропущен.значения находятся в столбцах Car, BuildingArea и YearBuild

# В Car отсутствуют некоторые значения, в основном с типом недвижимости коттетдж,
# возможно владельцы дома просто не предоставили инфомрацию о наличии парковочных мест. 

# Тоже применимо и для BuildingArea и YearBuild, возможно владельцы дома просто не предоставили инфомрацию.
```

\newpage
## Задача 9

Заполните пропущенные значения в столбце `Car` с помощью метода, который берёт значение из ячейки над ячейкой с пропуском.

*Ответ:*

```{r}
melb <- melb %>% fill(Car, .direction = "down")
```

\newpage

### Задача 10

Заполните пропущенные значения в столбце `BuildingArea` средним значением по столбцу.

*Ответ:*

```{r}
melb <- melb %>%mutate(BuildingArea = ifelse(is.na(BuildingArea),
                                                mean(BuildingArea, na.rm = TRUE),
                                                BuildingArea))
```

\newpage

### Задача 11

Заполните пропущенные значения в столбце `YearBuilt` медианным значением по столбцу.

*Ответ:*

```{r}
melb <- melb %>%mutate(YearBuilt = ifelse(is.na(YearBuilt),
                                                median(YearBuilt, na.rm = TRUE),
                                                YearBuilt))
```

\newpage
